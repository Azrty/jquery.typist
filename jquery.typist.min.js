/**
 * jquery.typist
 * @author Alexander Burtsev, http://burtsev.me, 2014
 * @license MIT
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(b,c){a.extend(this,{speed:10,text:"",cursor:!0,blinkSpeed:2,typeFrom:"end",cursorStyles:{display:"inline-block",fontStyle:"normal",margin:"-2px 2px 0 2px"}},c||{}),this._element=a(b),this._element.data("typist",this),this.queue=[],this.timer=null,this.delay=1e3/this.speed,this.blinkTimer=null,this.blinkDelay=1e3/this.blinkSpeed,this.text&&(this.queue.push(this.text),this.type())}a.fn.typist=function(a){return this.each(function(){new b(this,a)})},a.fn.typistAdd=function(b){return this.each(function(){var c=a(this).data("typist");c.queue.push(b),c.type()})},a.fn.typistRemove=function(){},a.fn.typistDefer=function(b){return b=parseInt(b)||0,this.each(function(){var c=a(this).data("typist");c.queue.push({delay:b}),c.type()})},a.fn.typistStop=function(){},b.prototype={addCursor:function(){this._cursor&&(clearInterval(this.blinkTimer),this._cursor.stop().remove()),this._cursor=a("<span>|</span>").css(this.cursorStyles).insertAfter(this._container),this.cursorVisible=!0,this.blinkTimer=setInterval(a.proxy(function(){this.cursorVisible=!this.cursorVisible,this._cursor.animate({opacity:this.cursorVisible?1:0},100)},this),this.blinkDelay)},step:function(b){if(!b.length)return this.timer=null,this.type();var c=b.shift();c="\n"===c?"<br/>":a("<div>").html(c).text(),this.timer=setTimeout(a.proxy(function(){this._container.html(this._container.html()+c),this.step(b)},this),this.delay)},stop:function(){},type:function(){if(!this.timer){this._container||(this._container=a("<span>"),"start"===this.typeFrom?this._element.prepend(this._container):this._element.append(this._container)),this.cursor&&this.addCursor();var b,c,d=this.queue.shift();if("string"==typeof d)b=d;else if(d&&d.delay)return c=d.delay,void(this.timer=setTimeout(a.proxy(function(){this.timer=null,this.type()},this),c));if(!b)return this.stop();b=b.split(""),this.step(b)}}}});